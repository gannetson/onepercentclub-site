{% extends "bb_accounts:bb_accounts/nav.hbs" %}
{% load bb_ember i18n %}

{% block_verbatim profile_anchor %}
    <a href="#" class="nav-member-dropdown">
    	{{#if controllers.currentOrder.donations.length }}
    	<span class="my-notifications">{{ controllers.currentOrder.donations.length }}</span>
    	{{/if}}
        <img {{bindAttr src="controllers.currentUser.getAvatar"}} width="40" height="40" alt="Avatar" />
        <strong>
            {% blocktrans %}My 1%{% endblocktrans %}
        </strong>
    </a>
{% endblock_verbatim profile_anchor %}jnj


{% block_verbatim my_menu %}

	 {{#if controllers.currentOrder.donations.length }}
        <li class="nav-cart">
            {{#linkTo 'currentOrder.index'}}
                <span class="nav-cart-count">{{ controllers.currentOrder.donations.length }}</span> {% trans "Pending donations" %} 
            {{/linkTo}}
        </li>
    {{/if}}

    <li>
        {{#linkTo "userProfile" }}
            {% trans "My profile" %}
        {{/linkTo }}
    </li>
    
    <li>
        {{#linkTo "userMonthlyProjects" }}
            {% trans "My Donations" %}
        {{/linkTo}}
    </li>

    <li>
        {{#linkTo "myProjectList" }}
            {% trans "My Projects" %}
        {{/linkTo}}
    </li>

    <li>
        {{#linkTo "myFundRaiserList" }}
            {% trans "My Fundraisers" %}
        {{/linkTo}}
    </li>
    
    <li class="nav-member-switch-language">
        <span>{% trans "Language" %}:</span> {{view "App.LanguageSwitchView"}}
    </li>

    <li class="nav-member-logout">
        {% block logout_anchor %}
            <a href="{% url 'accounts:logout' %}?next=/{{ LANGUAGE_CODE }}/">Logout</a>
        {% endblock logout_anchor %}
    </li>

{% endblock_verbatim my_menu %}


{% block_verbatim donations_anchor %}
{% endblock_verbatim donations_anchor %}


{% block_verbatim anonymous_user %}

    <li class="nav-signup-login">
        <a {{action 'openInBox' "login"}} class="nav-login">{%  trans "Sign in" %}</a>
    </li>
    <li class="nav-switch-language">
        {{view "App.LanguageSwitchView"}}
    </li>
{% endblock_verbatim anonymous_user %}
